CREATE OR REPLACE FUNCTION contar_dias (fechas_inicio date, fecha_termino date)
RETURNS void AS
$$
DECLARE
espacio INTEGER;
BEGIN
SELECT capacidad_instalacion
FROM base_de_datos;
espacio := capacidad_instalacion;
SELECT CAST(fecha_atraque AS DATE), CAST(fecha_salida AS DATE), id_instalacion 
FROM permisos_astillero 
WHERE fecha_salida >= final_intervalo AND fecha_atraque >= final_intervalo
UNION
SELECT CAST(fecha_atraque AS DATE), CAST(fecha_salida AS DATE), id_instalacion 
FROM permisos_astillero 
WHERE fecha_atraque <= inicio_intervalo AND fecha_salida >= inicio_intervalo
UNION
SELECT CAST(fecha_atraque AS DATE), CAST(fecha_salida AS DATE), id_instalacion 
FROM permisos_astillero 
WHERE fecha_atraque > inicio_intervalo AND fecha_salida < final_intervalo;
	
SELECT id_instalacion, capacidad_instalacion, nombre_puerto
 FROM muelles
UNION
SELECT id_instalacion, capacidad_instalacion, nombre_puerto
FROM astilleros;
espacio := capacidad_instalacion
WHILE fechas_inicio != fecha_termino
IF fechas_inicio >= fecha_salida THEN
fechas_inicio := fechas_inicio + 1;
espacio := espacio - 1;
END IF;
END WHILE;
RETURN ret;
    
END
$$ language plpgsql;